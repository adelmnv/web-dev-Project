<app-navbar></app-navbar>

<div *ngIf="tour" class="container">
  <div *ngIf="tour">
    <div class="tour-details-header">
      <h1>{{ tour.name }}</h1>

      <!-- Photo Gallery Section -->
      <div class="tour-gallery">
        <div class="image-container">
          <img
            *ngIf="images.length > 0"
            [src]="images[currentImageIndex]"
            alt="Tour image"
            class="tour-image"
          />
          <!-- Fallback message when there are no images -->
          <div *ngIf="images.length === 0">No images available</div>
        </div>
        <div class="gallery-controls">
          <button
            (click)="previousImage()"
            class="prev-btn"
            [disabled]="images.length === 0"
          >
            &lt;
          </button>
          <button
            (click)="nextImage()"
            class="next-btn"
            [disabled]="images.length === 0"
          >
            &gt;
          </button>
        </div>
      </div>

      <p class="tour-description">{{ tour.description }}</p>
      <div class="tour-duration">
        <strong>Duration:</strong> {{ tour.duration }} |
        <strong>Group Size:</strong> 10 people
      </div>
    </div>

    <div class="tour-info">
      <div class="tour-details">
        <h4>Tour Overview</h4>
        <p>{{ tour.description }}</p>

        <h4>Tour Highlights</h4>
        <ul>
          <li>Experience the thrill of a speedboat to Phi Phi Islands</li>
          <li>Be amazed by the variety of marine life in the archipelago</li>
        </ul>

        <h4>Meal Type: {{tour.meal_type}}</h4>

        <!-- Flight Details in Table -->
        <h4>Flight Options</h4>
        <table class="flight-table">
          <thead>
            <tr>
              <th>Select</th>
              <th>Airline (To)</th>
              <th>Flight Number (To)</th>
              <th>Departure (To)</th>
              <th>Arrival (To)</th>
              <th>Airline (Back)</th>
              <th>Flight Number (Back)</th>
              <th>Departure (Back)</th>
              <th>Arrival (Back)</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let flightPair of flightPairs; let i = index">
              <td>
                <input
                  type="radio"
                  name="flightPair"
                  [value]="i"
                  (change)="selectFlightPair(flightPair)"
                />
              </td>
              <td>{{ flightPair.to.airline }}</td>
              <td>{{ flightPair.to.flight_number }}</td>
              <td>{{ flightPair.to.departure|date: 'dd.MM.yyyy HH:mm' }}</td>
              <td>{{ flightPair.to.arrival|date: 'dd.MM.yyyy HH:mm' }}</td>
              <td>{{ flightPair.back.airline }}</td>
              <td>{{ flightPair.back.flight_number }}</td>
              <td>{{ flightPair.back.departure|date: 'dd.MM.yyyy HH:mm' }}</td>
              <td>{{ flightPair.back.arrival|date: 'dd.MM.yyyy HH:mm' }}</td>
            </tr>
          </tbody>
        </table>

        <!-- Hotel Information with Photos -->
        <h4>Hotel Information</h4>
        <p>
          <strong>{{ tour.hotel.name }}</strong>
        </p>
        <p>{{ tour.hotel.address }}</p>
        <p>{{ tour.hotel.city.name }}, {{ tour.hotel.city.country.name }}</p>
        <p><strong>Rating:</strong> {{ tour.hotel.rating }} stars</p>

        <!-- Hotel Photo Gallery -->
        <h4>Hotel Photos</h4>
        <div class="hotel-gallery">
          <div
            *ngFor="let img of tour.hotel.images"
            class="hotel-image-container"
          >
            <img [src]="img" alt="Hotel image" class="hotel-image" />
          </div>
        </div>
      </div>
    </div>

    <button (click)="goBack()" class="back-button">Go Back</button>
  </div>
</div>
